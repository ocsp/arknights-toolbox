(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.material"],{"3d2f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-material"}},[a("div",{staticClass:"mdui-row"},[a("div",{class:{"mdui-col-lg-6":t.$root.localeCN,"mdui-col-xs-12":t.$root.localeNotCN}},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("cultivate.panel.rarity")))])]),a("td",[t.$root.smallScreen?a("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$t("cultivate.panel.rarity")))]):t._e(),a("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.allRare?t.color.selected:t.color.notSelected),on:{click:function(e){t.selected.rare=t.l.fill(Array(t.selected.rare.length),!t.allRare)}}},[t._v(t._s(t.$t("common.selectAll")))]),t._l(5,(function(e){return a("tag-button",{key:"rare-"+(t.rareNum+1-e),attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[t.rareNum+1-e]},model:{value:t.selected.rare[t.rareNum-e],callback:function(a){t.$set(t.selected.rare,t.rareNum-e,a)},expression:"selected.rare[rareNum - i]"}},[t._v(" "+t._s(t.rareNum+1-e)+" ")])})),a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){t.selected.rare=t.l.concat([!1],t.l.fill(Array(t.rareNum-1),!0))}}},[t._v(t._s(t.$t("common.reset")))])],2)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.preset")))])]),a("td",[t.$root.smallScreen?a("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$t("common.preset")))]):t._e(),a("vue-tags-input",{ref:"presetInput",class:"tags-input"+(0===t.preset.length?" empty":""),attrs:{id:"preset",tags:t.selected.presets,"allow-edit-tags":!1,"add-from-paste":!1,"add-on-blur":!1,"autocomplete-items":t.presetItems,"add-only-from-autocomplete":!0,"autocomplete-always-open":!0,placeholder:t.$t("cultivate.panel.preset.placeholder"),autocomplete:"off"},on:{"tags-changed":t.usePreset,"before-adding-tag":function(e){return t.showPreset(e)}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"mdui-list-item mdui-p-y-0 mdui-p-x-1",on:{click:function(t){return e.performAdd(e.item)}}},[a("div",{staticClass:"mdui-list-item-avatar"},[a("img",{key:"head-"+e.item.text,staticClass:"no-pe",attrs:{src:t.$root.avatar(e.item.name),crossorigin:"anonymous"}})]),a("div",{staticClass:"mdui-list-item-content mdui-p-y-0 mdui-m-l-1"},[t._v(t._s(e.item.text))])])}},{key:"tag-center",fn:function(e){return a("span",{staticClass:"no-sl",on:{click:function(a){return t.showPreset(e,!0)}}},[t._v(t._s(e.tag.text))])}}]),model:{value:t.preset,callback:function(e){t.preset=e},expression:"preset"}})],1)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.setting")))])]),a("td",t._l(t.settingList[0],(function(e){return a("mdui-switch",{key:e,model:{value:t.setting[e],callback:function(a){t.$set(t.setting,e,a)},expression:"setting[key]"}},[t._v(t._s(t.$t("cultivate.setting."+e)))])})),1)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.option")))])]),a("td",[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset()}}},[t._v(t._s(t.$t("cultivate.panel.button.resetAll")))]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset("need")}}},[t._v(t._s(t.$t("cultivate.panel.button.resetNeed")))]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset("have")}}},[t._v(t._s(t.$t("cultivate.panel.button.resetHave")))]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-blue-600 tag-btn",on:{click:function(e){return t.dataSyncDialog.open()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("cloud")]),t._v(" "+t._s(t.$t("cultivate.panel.button.cloudSync")))]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-pink tag-btn",on:{click:t.resetPenguinData}},[t._v(t._s(t.$t("cultivate.panel.button.forceUpdate")))])])]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.calculation")))])]),a("td",[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-purple tag-btn mdui-m-r-2",attrs:{id:"ark-planner-btn",disabled:t.apbDisabled},on:{click:function(e){t.apbDisabled=!0,t.initPlanner().then((function(){t.showPlan(),t.apbDisabled=!1}))}}},[t._v(t._s(t.$t("cultivate.panel.button.farmCalculation")))]),t._l(t.settingList[1],(function(e){return a("mdui-switch",{key:e,model:{value:t.setting[e],callback:function(a){t.$set(t.setting,e,a)},expression:"setting[key]"}},[t._v(t._s(t.$t("cultivate.setting."+e)))])}))],2)])])])]),a("div",{class:{"mdui-col-lg-6":t.$root.localeCN,"mdui-col-xs-12":t.$root.localeNotCN}},[t.$root.localeCN?a("material-readme",{staticClass:"mdui-hidden-md-down"}):t._e(),a("div",{staticClass:"mdui-panel mdui-panel-gapless mdui-m-t-2",class:{"mdui-hidden-lg-up":t.$root.localeCN},attrs:{"mdui-panel":""}},[a("div",{staticClass:"mdui-panel-item"},[a("div",{staticClass:"mdui-panel-item-header"},[a("div",{staticClass:"mdui-panel-item-title"},[t._v(t._s(t.$t("common.guide")))]),a("i",{staticClass:"mdui-panel-item-arrow mdui-icon material-icons"},[t._v("keyboard_arrow_down")])]),a("div",{staticClass:"mdui-panel-item-body mdui-p-l-0"},[a("material-readme")],1)])])],1)]),a("div",{staticClass:"mdui-row",class:{rendering:t.$root.materialListRendering},attrs:{id:"material-main"}},[t.setting.simpleMode?a("div",{staticClass:"mdui-col-xs-12 mdui-m-t-4",attrs:{id:"material-simple"}},[a("transition-group",{staticClass:"material-group-wrap",attrs:{tag:"div",name:"material-group-wrap-transition"},on:{"before-leave":t.transitionBeforeLeave,"after-leave":t.transitionAfterLeave}},t._l(t.materialsOrder,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterialsFlatten.includes(e),expression:"showMaterialsFlatten.includes(materialName)"}],key:e+"-simple",class:t.$root.smallScreen?"mdui-col-xs-6 material-simple-wrap":"inline-block"},[a("div",{class:"mdui-card "+(t.$root.smallScreen?"mdui-center":"mdui-m-r-2")+" mdui-m-b-2 material material-simple"+(t.setting.translucentDisplay&&t.hasInput&&0==t.gaps[e][0]?" opacity-5":"")},[a("div",{class:"card-triangle-small "+t.color[t.materialsTable[e].rare]}),a("div",{staticClass:"mdui-card-header",attrs:{name:e}},[a("div",{class:"mdui-card-header-avatar mdui-valign no-sl "+(t.l.size(t.materialsTable[e].drop)>0?"pointer":""),on:{click:function(a){t.l.size(t.materialsTable[e].drop)>0&&t.showDropDetail(t.materialsTable[e])}}},[a("arkn-item-t",{attrs:{t:t.materialsTable[e].rare}}),a("img",{staticClass:"material-image no-pe",attrs:{src:t.$root.materialImage(t.materialsTable[e].name),crossorigin:"anonymous"}}),a("div",{staticClass:"material-simple-name mdui-text-truncate",class:{"mdui-text-color-pink-accent":t.inputs[e].need>0}},[t._v(t._s(t.$t("material."+e)))])],1),a("div",[a("mdui-number-input",{staticClass:"block mdui-m-b-1",class:{"small-ph":t.$root.localeNotCN},attrs:{placeholder:t.$t("common.need")},model:{value:t.inputs[e].need,callback:function(a){t.$set(t.inputs[e],"need",a)},expression:"inputs[materialName].need"}}),a("mdui-number-input",{staticClass:"block mdui-m-b-1",class:{"small-ph":t.$root.localeNotCN},attrs:{placeholder:t.$t("common.have")},model:{value:t.inputs[e].have,callback:function(a){t.$set(t.inputs[e],"have",a)},expression:"inputs[materialName].have"}}),a("div",{staticClass:"gap block"},[a("span",{staticClass:"gap-num no-sl"},[t._v(t._s(t.gaps[e][0])),t.gaps[e][1]>0?a("small",[t._v("("+t._s(t.gaps[e][1])+")")]):t._e()])])],1)])])])})),0)],1):a("transition-group",{attrs:{id:"material-normal",tag:"div",name:"material-group-wrap-transition"},on:{"before-leave":t.transitionBeforeLeave,"after-leave":t.transitionAfterLeave}},t._l(t.rareNum,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterials[t.rareNum+1-e].length>0,expression:"showMaterials[rareNum + 1 - i].length > 0"}],key:"materials-"+e,staticClass:"mdui-col-xs-12"},[a("div",{staticClass:"mdui-typo rare-title"},[a("h2",[t._v(t._s(t.$t("common.rarity"))+" "+t._s(t.rareNum+1-e))])]),a("transition-group",{staticClass:"material-group-wrap",attrs:{tag:"div",name:"material-group-wrap-transition"},on:{"before-leave":t.transitionBeforeLeave,"after-leave":t.transitionAfterLeave}},t._l(t.materials[t.rareNum+1-e],(function(n){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterials[t.rareNum+1-e].includes(n.name),expression:"showMaterials[rareNum + 1 - i].includes(material.name)"}],key:n.name,class:"mdui-card "+(t.$root.smallScreen?"mdui-p-b-2":"mdui-m-b-2 mdui-m-r-2")+" material"+(t.setting.translucentDisplay&&t.hasInput&&0==t.gaps[n.name][0]?" opacity-5":"")},[a("div",{class:"card-triangle "+t.color[t.rareNum+1-e]}),a("div",{staticClass:"mdui-card-header",attrs:{name:n.name,"mdui-tooltip":!t.$root.smallScreen&&"{content:'"+t.madeofTooltips[n.name]+"',position:'top'}"}},[a("div",{staticClass:"mdui-card-header-avatar mdui-valign no-sl"},[a("arkn-item-t",{attrs:{t:t.rareNum+1-e}}),a("img",{staticClass:"material-image no-pe",attrs:{src:t.$root.materialImage(n.name),crossorigin:"anonymous"}})],1),a("div",{staticClass:"mdui-card-header-title no-sl",class:{"mdui-text-color-pink-accent":t.inputs[n.name].need>0}},[a("auto-scale-text",{key:t.$t("material."+n.name)+"-"+t.calcMaterialNameTextWidth(n),attrs:{"max-width":t.calcMaterialNameTextWidth(n)}},[t._v(t._s(t.$t("material."+n.name)))]),t.synthesizable[n.name]&&t.gaps[n.name][1]>0?a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense small-btn mdui-text-color-pink-accent mdui-p-x-1 mdui-m-l-05",on:{click:function(e){return t.synthesize(n.name)}}},[t._v(t._s(t.$t("common.synthesize")))]):t._e(),t.$root.smallScreen?a("p",{staticClass:"mdui-m-y-0 mdui-text-color-black-disabled mdui-text-truncate",staticStyle:{"font-size":"12px","font-weight":"400"}},[t._v(t._s(t.madeofTooltips[n.name]))]):t._e()],1),a("div",{class:!t.$root.smallScreen&&"mdui-m-t-1"},[a("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:t.inputs[n.name].need,callback:function(e){t.$set(t.inputs[n.name],"need",e)},expression:"inputs[material.name].need"}},[t._v(t._s(t.$t("common.need")))]),a("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:t.inputs[n.name].have,callback:function(e){t.$set(t.inputs[n.name],"have",e)},expression:"inputs[material.name].have"}},[t._v(t._s(t.$t("common.have")))]),a("div",{staticClass:"gap"},[a("label",{staticClass:"mdui-textfield-label no-sl"},[t._v(t._s(t.$t("common.lack")))]),a("span",{staticClass:"gap-num no-sl"},[t._v(t._s(t.gaps[n.name][0])),t.gaps[n.name][1]>0?a("small",[t._v("("+t._s(t.gaps[n.name][1])+")")]):t._e()])]),t.l.size(n.drop)>0?a("ul",{staticClass:"drop-list no-sl pointer",attrs:{length:t.l.size(n.drop)},on:{click:function(e){return t.showDropDetail(n)}}},t._l(n.drop,(function(e,i){return a("li",{key:n.name+"-"+i,staticClass:"drop"},[a("span",{staticClass:"code"},[t._v(t._s(i))]),t.setting.showDropProbability&&t.plannerInited?a("span",{class:"probability "+t.color[t.enumOccPer[e]]},[t.dropTable[i]?[t.dropInfo.expectAP[n.name][i]<1e3?a("span",[t._v(t._s(t.dropInfo.expectAP[n.name][i].toPrecision(3))+"⚡")]):a("span",[t._v(t._s(t.dropInfo.expectAP[n.name][i].toFixed())+"⚡")])]:a("span",{class:"show-0"+(t.dropTable[i]?" opacity-0":"")},[t._v("N/A")])],2):a("span",{class:"probability "+t.color[t.enumOccPer[e]]},[t._v(t._s(t.$t("cultivate.occPer."+t.enumOccPer[e])))])])})),0):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$root.smallScreen&&t.l.size(n.drop)>2,expression:"$root.smallScreen && l.size(material.drop) > 2"}],staticClass:"drop-list-more"},[t._v(">")])],1)])])})),0)],1)})),0)],1),a("div",{staticClass:"mdui-dialog mdui-card",attrs:{id:"preset-setting"}},[t.sp?[a("div",{staticClass:"mdui-card-header mdui-p-b-0"},[a("img",{staticClass:"mdui-card-header-avatar no-pe",attrs:{src:!!t.selectedPresetName&&t.$root.avatar(t.selectedPresetName),crossorigin:"anonymous"}}),a("div",{staticClass:"mdui-card-header-title"},[t._v(t._s(t.$t("character."+t.selectedPresetName)))])]),a("div",{staticClass:"mdui-card-content preset-list mdui-p-x-3"},[a("div",{staticClass:"elite-cb-list"},t._l(t.sp.evolve,(function(e,n){return a("mdui-checkbox",{key:"elite-"+(n+1),model:{value:t.pSetting.evolve[n],callback:function(e){t.$set(t.pSetting.evolve,n,e)},expression:"pSetting.evolve[i]"}},[t._v(t._s(t.$t("common.promotion"))+t._s(n+1))])})),1),t.sp.skills.normal.length>=2?a("div",{staticClass:"skill-normal"},[a("mdui-checkbox",{staticClass:"skill-cb",model:{value:t.pSetting.skills.normal[0],callback:function(e){t.$set(t.pSetting.skills.normal,0,e)},expression:"pSetting.skills.normal[0]"}},[t._v(t._s(t.$t("common.skill")))]),a("div",{staticClass:"inline-block"},[a("mdui-select-num",{attrs:{options:t.l.range(1,t.sp.skills.normal.length+1)},on:{change:function(e){t.$mutationNextTick(),t.pSetting.skills.normal[1]>=t.pSetting.skills.normal[2]&&(t.pSetting.skills.normal[2]=t.pSetting.skills.normal[1]+1)}},model:{value:t.pSetting.skills.normal[1],callback:function(e){t.$set(t.pSetting.skills.normal,1,e)},expression:"pSetting.skills.normal[1]"}}),a("i",{staticClass:"mdui-icon material-icons mdui-m-x-2"},[t._v("arrow_forward")]),a("span",{key:"sn-s-"+(t.pSetting.skills.normal[1]+1)},[a("mdui-select-num",{attrs:{options:t.l.range(t.pSetting.skills.normal[1]+1,t.sp.skills.normal.length+2)},model:{value:t.pSetting.skills.normal[2],callback:function(e){t.$set(t.pSetting.skills.normal,2,e)},expression:"pSetting.skills.normal[2]"}})],1)],1)],1):t._e(),t.sp.skills.elite.length>0?t._l(t.sp.skills.elite,(function(e,n){return a("div",{key:"se-"+e.name,staticClass:"skill-elite"},[a("mdui-checkbox",{staticClass:"skill-cb",model:{value:t.pSetting.skills.elite[n][0],callback:function(e){t.$set(t.pSetting.skills.elite[n],0,e)},expression:"pSetting.skills.elite[i][0]"}},[t._v(t._s(t.$t("skill."+e.name)))]),a("div",{staticClass:"inline-block"},[a("mdui-select-num",{attrs:{options:t.l.range(t.sp.skills.normal.length+1,t.sp.skills.normal.length+e.cost.length+1)},on:{change:function(e){t.$mutationNextTick(),t.pSetting.skills.elite[n][1]>=t.pSetting.skills.elite[n][2]&&(t.pSetting.skills.elite[n][2]=t.pSetting.skills.elite[n][1]+1)}},model:{value:t.pSetting.skills.elite[n][1],callback:function(e){t.$set(t.pSetting.skills.elite[n],1,e)},expression:"pSetting.skills.elite[i][1]"}}),a("i",{staticClass:"mdui-icon material-icons mdui-m-x-2"},[t._v("arrow_forward")]),a("span",{key:"se-s-"+(t.pSetting.skills.elite[n][1]+1)},[a("mdui-select-num",{attrs:{options:t.l.range(t.pSetting.skills.elite[n][1]+1,t.sp.skills.normal.length+e.cost.length+2)},model:{value:t.pSetting.skills.elite[n][2],callback:function(e){t.$set(t.pSetting.skills.elite[n],2,e)},expression:"pSetting.skills.elite[i][2]"}})],1)],1)],1)})):t._e()],2)]:t._e(),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.cancel")))]),"add"==this.pSetting.state?a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-confirm":""},on:{click:t.addPreset}},[t._v(t._s(t.$t("common.add")))]):t._e(),"edit"==this.pSetting.state?a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-teal",attrs:{"mdui-dialog-confirm":""},on:{click:t.editPreset}},[t._v(t._s(t.$t("common.edit")))]):t._e()])],2),a("div",{staticClass:"mdui-dialog mdui-typo",attrs:{id:"planner"}},[t.plannerRequest&&t.plan?[a("div",{staticClass:"mdui-dialog-title"},[t._v(" "+t._s(t.$t("cultivate.planner.title"))+" "),a("p",{staticClass:"mdui-m-b-0 mdui-m-t-2",staticStyle:{"font-size":"15px"}},[t._v(" "+t._s(t.$t("cultivate.planner.expectedAP"))),a("code",[t._v(t._s(t.plan.cost))]),a("br"),a("span",{staticClass:"mdui-text-color-blue-900"},[t._v(t._s(t.$t("common.mission")))]),t._v(" × "),a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v(t._s(t.$t("common.times")))]),t._v(" ("),a("span",{staticClass:"mdui-text-color-yellow-900"},[t._v(t._s(t.$t("item.AP_GAMEPLAY")))]),t._v(") "),a("span",{staticClass:"mdui-text-color-black blod-text"},[t._v(t._s(t.$t("cultivate.planner.targetMaterial")))]),t._v(" "),a("span",{staticStyle:{color:"rgba(0,0,0,.7)"}},[t._v(t._s(t.$t("cultivate.planner.otherMaterial")))])])]),a("div",{staticClass:"mdui-dialog-content"},[t._l(t.plan.stages,(function(e){return a("div",{key:e.code,staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[a("span",{staticClass:"mdui-text-color-blue-900"},[t._v(t._s(e.code))]),t._v(" × "),a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v(t._s(e.times))]),t._v(" ("),a("span",{staticClass:"mdui-text-color-yellow-900"},[t._v(t._s(e.cost))]),t._v(") ")]),a("div",{staticClass:"num-item-list"},[t._l(e.drops,(function(n){return a("arkn-num-item",{key:e.code+"-"+n.name,attrs:{t:t.materialsTable[n.name].rare,img:n.name,lable:t.$t("material."+n.name),num:n.num,color:t.gaps[n.name][0]>0&&"mdui-text-color-black blod-text"}})})),a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:t.$t("item.4001"),num:t.num10k(e.money)}}),e.cardExp>0?a("arkn-num-item",{attrs:{t:"5",img:"E-5-1",lable:t.$t("common.exp"),num:t.num10k(e.cardExp)}}):t._e()],2)])})),t.plan.synthesis.length>0?a("div",{staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[t._v(t._s(t.$t("cultivate.planner.needToBeSynthesized")))]),a("div",{staticClass:"num-item-list"},[t._l(t.plan.synthesis,(function(e){return a("arkn-num-item",{key:"合成-"+e.name,attrs:{t:t.materialsTable[e.name].rare,img:e.name,lable:t.$t("material."+e.name),num:e.num}})})),a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:t.$t("cultivate.planner.moneyUsed"),num:t.num10k(t.plan.synthesisCost)}})],2)]):t._e(),a("div",{staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[t._v(t._s(t.$t("cultivate.planner.obtain")))]),a("div",{staticClass:"num-item-list"},[a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:t.$t("item.4001"),num:t.num10k(t.plan.money)}}),t.plan.cardExp>0?a("arkn-num-item",{attrs:{t:"5",img:"E-5-1",lable:t.$t("common.exp"),num:t.num10k(t.plan.cardExp)}}):t._e()],1)])],2)]:t._e(),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.close")))])])],2),a("div",{staticClass:"mdui-dialog mdui-typo",attrs:{id:"drop-detail"}},[t.dropDetails?[a("div",{staticClass:"mdui-dialog-title mdui-p-b-1"},[t._v(" "+t._s(t.$t("material."+t.dropFocus))+" "),a("p",{staticClass:"mdui-m-b-0 mdui-m-t-1",staticStyle:{"font-size":"16px"}},[t._v(t._s(t.$t("common.mission"))+" | "+t._s(t.$t("cultivate.dropDetail.expectedAP"))+"⚡ | $"+t._s(t.$t("cultivate.dropDetail.costPerformanceOfMission")))])]),a("div",{staticClass:"mdui-dialog-content mdui-p-b-0"},t._l(t.dropDetails,(function(e){return a("div",{key:"dd-"+e.code,staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[t._v(" "+t._s(e.code)+" "),a("code",[t._v(t._s(t.l.round(t.dropInfo.expectAP[t.dropFocus][e.code],1).toPrecision(3))+"⚡")]),t._v(" "),a("code",[t._v("$"+t._s(t.dropInfo.stageValue[e.code].toPrecision(4)))])]),a("div",{staticClass:"num-item-list"},t._l(e.drops,(function(n){return a("arkn-num-item",{key:"detail-"+e.code+"-"+n[0],attrs:{t:t.materialsTable[n[0]].rare,img:n[0],lable:t.$t("material."+n[0]),num:t.l.round(100*n[1],2)+"%",color:t.dropFocus==n[0]&&"mdui-text-color-black blod-text"}})})),1)])})),0)]:t._e(),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.close")))])])],2),a("div",{staticClass:"mdui-dialog mdui-typo",attrs:{id:"data-sync"}},[a("div",{staticClass:"mdui-dialog-title"},[t._v(t._s(t.$t("cultivate.panel.sync.cloudSync")))]),a("div",{staticClass:"mdui-dialog-content mdui-p-b-0"},[a("h5",{staticClass:"mdui-m-t-0"},[t._v(t._s(t.$t("cultivate.panel.sync.cloudBackup")))]),a("div",{staticClass:"mdui-valign-bottom mdui-m-b-1 space-8",class:{processing:t.dataSyncing}},[a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-green-600 tag-btn",on:{click:function(e){return t.cloudSaveData()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("cloud_upload")]),t._v(" "+t._s(t.$t("common.backup")))]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-blue-600 tag-btn",attrs:{disabled:!t.setting.syncCode},on:{click:t.cloudRestoreData}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("cloud_download")]),t._v(" "+t._s(t.$t("common.restore")))]),a("div",{staticClass:"mdui-textfield mdui-m-r-1",attrs:{id:"sync-code"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.setting.syncCode,expression:"setting.syncCode",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text",placeholder:t.$t("cultivate.panel.sync.syncCode")},domProps:{value:t.setting.syncCode},on:{input:function(e){e.target.composing||t.$set(t.setting,"syncCode",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("mdui-switch",{attrs:{disabled:!t.setting.syncCode},model:{value:t.setting.autoSyncUpload,callback:function(e){t.$set(t.setting,"autoSyncUpload",e)},expression:"setting.autoSyncUpload"}},[t._v(t._s(t.$t("cultivate.panel.sync.autoSyncUpload")))])],1),a("p",[t._v(t._s(t.$t("cultivate.panel.sync.cloudSyncReadme")))]),a("p",[t._v(t._s(t.$t("cultivate.panel.sync.autoSyncUploadTip")))]),t._m(0),a("div",{staticClass:"mdui-divider mdui-m-y-2"}),a("h5",{staticClass:"mdui-m-t-0"},[t._v(t._s(t.$t("cultivate.panel.sync.localBackup")))]),a("div",{staticClass:"mdui-m-b-2"},[a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-green-600 tag-btn",on:{click:t.saveData}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("file_upload")]),t._v(" "+t._s(t.$t("common.backup")))]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-blue-600 tag-btn",on:{click:t.restoreData}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("file_download")]),t._v(" "+t._s(t.$t("common.restore")))])]),a("p",[t._v(t._s(t.$t("cultivate.panel.sync.localBackupReadme")))])]),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.close")))])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Powered by "),a("a",{attrs:{href:"http://myjson.com/",target:"_blank"}},[t._v("myjson")]),t._v(".")])}],s=(a("a4d3"),a("e01a"),a("d28b"),a("99af"),a("a623"),a("cb29"),a("4de4"),a("4160"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("fb6a"),a("b0c0"),a("dca8"),a("b64b"),a("d3b7"),a("07ac"),a("ac1f"),a("25f0"),a("2532"),a("3ca3"),a("5319"),a("1276"),a("2ca0"),a("159b"),a("ddb0"),a("96cf"),a("c964")),r=a("f3f3"),l=a("d0ff"),o=a("d0af"),c=a("b4ac"),u=a("5c6d"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"mdui-typo mdui-m-y-0",staticStyle:{"font-size":"14px"}},[t.$root.localeCN?[a("li",[t._v("设置与输入会实时自动保存")]),t._m(0),a("li",[t._v("点击一次材料名字旁边的"),a("b",[t._v(t._s(t.$t("common.synthesize")))]),t._v("按钮可模拟全部合成（扣除原材料，增加产物）")]),a("li",[t._v("点击材料卡片右侧的掉落信息可显示相关关卡的详细掉落情况，以及关卡性价比（越高越好）")]),t._m(1),t._m(2),a("li",[a("b",[t._v(t._s(t.$t("cultivate.panel.button.farmCalculation")))]),t._v("可以计算最优的刷图路线，仅供参考，掉落概率数据来自"),a("a",{attrs:{href:"https://penguin-stats.io/",target:"_blank"}},[t._v("企鹅物流数据统计")])])]:[a("li",[t._v("Settings and inputs will be saved automatically.")]),t._m(3),a("li",[t._v("View some statistical data about a material by clicking the dropping information on the right side of the material card.")]),a("li",[t._v("Click the "),a("b",[t._v(t._s(t.$t("common.synthesize")))]),t._v(" button next to a material's name can simulate a synthesis.")]),t._m(4),t._m(5),a("li",[a("b",[t._v('"'+t._s(t.$t("cultivate.panel.button.farmCalculation"))+'"')]),t._v(" is a function to calculate the optimal missions by linear programming. All data come from "),a("a",{attrs:{href:"https://penguin-stats.io/",target:"_blank"}},[t._v("penguin stats")]),t._v(".")])]],2)},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[t._v("材料卡片的"),a("b",[t._v("仍需")]),t._v("中，小字括号中的数字表示可以合成的数量")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v("粉色字材料")]),t._v("代表该材料存在原始需求，而不仅仅是上位材料所需的合成材料")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("b",[t._v("预设")]),t._v("用于计算干员精英化/技能升级所需材料，添加预设将会丢弃当前所有的"),a("b",[t._v("需求")]),t._v("输入，点击已添加的预设可以进行编辑；在"),a("b",[t._v("重置需求&已有")]),t._v("或"),a("b",[t._v("重置需求")]),t._v("后，预设将一并被清空")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[t._v("In "),a("b",[t._v('"Lack"')]),t._v(" on the material card, the number with brackets means the quantity that the current material can be synthesized.")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v("Material name with a pink color")]),t._v(" means it has original demand, but not only be used to synthesize.")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[t._v("Use "),a("b",[t._v('"Preset"')]),t._v(" to calculate material demand of cultivating operators. Add a preset will drop all "),a("b",[t._v('"Need"')]),t._v(' changes. You can edit a preset by clicking its label. All presets will be cleared if you reset "Need" or reset all.')])}],p={name:"material-readme"},v=p,h=a("0c7c"),f=Object(h["a"])(v,m,d,!1,null,null,null),g=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inline-block",style:{maxWidth:!!t.maxWidth&&t.maxWidth+"px"}},[a("span",{ref:"text",staticClass:"inline-block scale-text"},[t._t("default")],2)])},_=[],y=(a("a9e3"),{name:"auto-scale-text",props:{maxWidth:[String,Number]},computed:{maxWidthInt:function(){return parseInt(this.maxWidth)}},mounted:function(){var t=this.$refs.text;this.maxWidthInt&&t.offsetWidth>this.maxWidthInt&&(t.style.transform="scaleX(".concat(this.maxWidthInt/t.offsetWidth,")"))}}),k=y,$=(a("cf23"),Object(h["a"])(k,b,_,!1,null,"29d855e9",null)),C=$.exports,x=a("60bb"),S=a.n(x),w=a("27ae"),T=a("ab3e"),D=a("5ec1"),I=a.n(D),N=a("6821"),P=a.n(N),E=a("6a80"),O=a("9031"),A=a("9d72"),j=S.a.transform(A,(function(t,e,a){e.name=a,t.push(e)}),[]),M={0:"ALWAYS",1:"ALMOST",2:"USUAL",3:"OFTEN",4:"SOMETIMES"};Object.freeze(M);var L="https://penguin-stats.io/PenguinStats/api/result/matrix?show_stage_details=true&show_item_details=true",z=7,R=["cost","event","cardExp"],F={evolve:[!1,!1],skills:{normal:[!1,1,7],elite:[[!1,7,10],[!1,7,10],[!1,7,10]]},state:"add"};function U(t){return t<0?0:t}var W={name:"arkn-material",components:{MaterialReadme:g,ArknNumItem:c["a"],ArknItemT:u["a"],AutoScaleText:C},data:function(){return{l:S.a,showAll:!1,enumOccPer:M,materials:j,materialsList:j,materialsTable:A,materialsOrder:S.a.sortBy(S.a.clone(j),"sortId").map((function(t){var e=t.name;return e})),charTable:E,elite:O,inputs:{},preset:"",selectedPresetName:"",selectedPreset:!1,pSetting:S.a.cloneDeep(F),presetDialog:!1,selected:{rare:[],presets:[]},setting:{simpleMode:!1,hideIrrelevant:!1,translucentDisplay:!0,stopSynthetiseLE3:!1,showDropProbability:!1,planIncludeEvent:!0,planCardExpFirst:!1,syncCode:"",autoSyncUpload:!1},settingList:[["simpleMode","hideIrrelevant","translucentDisplay","stopSynthetiseLE3","showDropProbability"],["planCardExpFirst","planIncludeEvent"]],color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",5:"mdui-color-yellow-700",4:"mdui-color-deep-purple-300",3:"mdui-color-blue-600",2:"mdui-color-lime",1:"mdui-color-grey-700",ALWAYS:"mdui-color-grey-900",ALMOST:"mdui-color-grey-700",USUAL:"mdui-color-grey-500",OFTEN:"mdui-color-grey-300",SOMETIMES:"mdui-color-red-900"},penguinData:{expire:0,data:!1},plannerInited:!1,dropTable:{},plannerRequest:!1,plannerDialog:!1,apbDisabled:!1,dropDialog:!1,dropDetails:!1,dropFocus:"",dropInfo:{expectAP:{},stageValue:{}},synthesisTable:{le3:{},gt3:{}},materialConstraints:{},dataSyncDialog:!1,dataSyncing:!1,throttleAutoSyncUpload:null,ignoreInputsChange:!1}},watch:{setting:{handler:function(t){return localStorage.setItem("material.setting",JSON.stringify(t))},deep:!0},selected:{handler:function(t){return localStorage.setItem("material.selected",JSON.stringify(t))},deep:!0},inputs:{handler:function(t){for(var e=0,a=Object.values(t);e<a.length;e++)for(var n=a[e],i=0,s=Object.keys(n);i<s.length;i++){var r=s[i];if(["need","have"].includes(r)){var l=n[r],o=/[^0-9]/.exec(l);o&&(n[r]=(parseInt(/[0-9]*/.exec(l)[0])||0).toString())}else delete n[r]}localStorage.setItem("material.inputs",JSON.stringify(t)),this.setting.autoSyncUpload&&this.setting.syncCode&&this.throttleAutoSyncUpload&&(this.ignoreInputsChange?this.ignoreInputsChange=!1:this.throttleAutoSyncUpload())},deep:!0},"setting.showDropProbability":function(t){t&&this.initPlanner()},"$root.locale":function(){this.updatePreset()}},computed:{compressedInputs:{get:function(){return S.a.transform(this.inputsInt,(function(t,e,a){var n=e.need,i=e.have;n+i>0&&(t[a]=[n,i])}),{})},set:function(t){var e=this;this.reset(null,!1,!1),S.a.each(t,(function(t,a){if(Array.isArray(t)){var n=Object(o["a"])(t,2),i=n[0],s=n[1];e.inputs[a].need=i>0?S.a.toString(i):"",e.inputs[a].have=s>0?S.a.toString(s):""}else{var r=t.need,l=t.have;e.inputs[a].need=r,e.inputs[a].have=l}}))}},madeofTooltips:function(){var t=this;return S.a.transform(this.materialsList,(function(e,a){var n=a.name,i=a.madeof,s=[];S.a.forIn(i,(function(e,a){return s.push("".concat(t.$t("material.".concat(a)),"*").concat(e))})),e[n]=s.length>0?"".concat(s.join("、")):t.$t("common.cannotSynthesize")}),{})},synthesizable:function(){var t=this;return S.a.transform(this.materialsList,(function(e,a){var n=a.name,i=a.madeof;0!=S.a.size(i)?e[n]=S.a.every(i,(function(e,a){return t.inputsInt[a].have>=e})):e[n]=!1}),{})},allRare:function(){return S.a.sum(this.selected.rare)==this.rareNum},rareNum:function(){return S.a.size(this.materials)},inputsInt:function(){var t={};for(var e in this.inputs)t[e]=S.a.mapValues(this.inputs[e],(function(t){return parseInt(t)||0}));return t},gaps:function(){var t=this,e=this.inputsInt,a=S.a.mapValues(e,(function(t){return t.need})),n=S.a.mapValues(e,(function(){return 0})),i=S.a.mapValues(e,(function(){return 0}));return S.a.forInRight(this.materials,(function(n,i){var s=!0,r=!1,l=void 0;try{for(var o,c=function(){var n=o.value,s=n.name,r=n.madeof;if(a[s]=U(a[s]-e[s].have),t.setting.stopSynthetiseLE3&&i<=3)return"continue";S.a.forIn(r,(function(t,e){a[e]+=a[s]*t}))},u=n[Symbol.iterator]();!(s=(o=u.next()).done);s=!0)c()}catch(m){r=!0,l=m}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}})),S.a.forIn(this.materials,(function(e,s){var r=!0,l=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var m=c.value,d=m.name,p=m.madeof;if(!(0==S.a.size(p)||t.setting.stopSynthetiseLE3&&s<=3))while(a[d]>0&&S.a.every(p,(function(e,a){return t.inputsInt[a].have+n[a]-i[a]-e>=0})))a[d]--,n[d]++,S.a.forEach(p,(function(t,e){return i[e]+=t}))}}catch(v){l=!0,o=v}finally{try{r||null==u.return||u.return()}finally{if(l)throw o}}})),S.a.mergeWith(a,n,(function(t,e){return[t,e]}))},hasDataMaterials:function(){var t=this;return S.a.mapValues(this.materials,(function(e){var a=[],n=!0,i=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value.name;t.inputsInt[o].need+t.inputsInt[o].have+t.gaps[o][0]+t.gaps[o][1]>0&&a.push(o)}}catch(c){i=!0,s=c}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}return a}))},showMaterials:function(){var t=this,e=S.a.mapValues(this.materials,(function(e,a){var n=[],i=!0,s=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var c=l.value.name;(t.inputsInt[c].need>0||0==t.inputsInt[c].need&&t.selected.rare[a-1]&&(t.hasDataMaterials[a].includes(c)||!t.hasDataMaterials[a].includes(c)&&(!t.setting.hideIrrelevant||!t.hasInput)))&&n.push(c)}}catch(u){s=!0,r=u}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}return n}));return e},showMaterialsFlatten:function(){var t=this;return S.a.transform(this.materials,(function(e,a,n){var i=!0,s=!1,r=void 0;try{for(var l,o=a[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var c=l.value.name;(t.inputsInt[c].need>0||0==t.inputsInt[c].need&&t.selected.rare[n-1]&&(t.hasDataMaterials[n].includes(c)||!t.hasDataMaterials[n].includes(c)&&(!t.setting.hideIrrelevant||!t.hasInput)))&&e.push(c)}}catch(u){s=!0,r=u}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}}),[])},hasInput:function(){for(var t=0,e=1;e<=this.rareNum;e++)t+=this.hasDataMaterials[e].length;return t},presetItems:function(){var t=this,e=this.preset.toLowerCase().replace(/ /g,""),a=[];for(var n in this.elite){var i=this.charTable[n].pinyin,s=i.full,r=i.head,l=[s,r,this.$t("character.".concat(n)).toLowerCase().replace(/ /g,"")].map((function(t){return t.indexOf(e)}));S.a.every(l,(function(t){return-1===t}))||a.push({pos:S.a.min(l.filter((function(t){return t>=0}))),name:n})}return a.sort((function(t,e){return t.pos==e.pos?t.name.length-e.name.length:t.pos-e.pos})),S.a.map(a,(function(e){return{name:e.name,text:t.$t("character.".concat(e.name))}})).slice(0,10)},sp:function(){return 0!==this.selectedPresetName.length&&this.elite[this.selectedPresetName]},checkPSetting:function(){var t=this.pSetting,e=[].concat(Object(l["a"])(t.evolve),[t.skills.normal[0]],Object(l["a"])(S.a.map(t.skills.elite,(function(t){return t[0]}))));return S.a.sum(e)>0},plan:function(){var t=this;if(!this.plannerInited)return!1;var e=[this.setting.planIncludeEvent?this.dropTable:S.a.omitBy(this.dropTable,(function(t){return t.event})),this.synthesisTable.gt3];this.setting.stopSynthetiseLE3||e.push(this.synthesisTable.le3);var a={optimize:"cost",opType:"min",constraints:Object(r["a"])({},this.materialConstraints,{},S.a.transform(this.inputsInt,(function(t,e,a){e.need>0&&(t[a]={min:e.need})}),{}),{cardExp:{min:0},init:{equal:1}}),variables:Object.assign.apply(Object,[{have:S.a.transform(this.inputsInt,(function(t,e,a){e.have>0&&(t[a]=e.have)}),{init:1})}].concat(e))};this.setting.planCardExpFirst&&(a.variables["转换-经验值"]={cardExp:-7400,cost:-30});var n=I.a.Solve(a);if(!n.feasible)return!1;delete n.feasible,delete n.result,delete n.bounded,delete n.have;var i=S.a.mapValues(S.a.mapValues(S.a.omitBy(n,(function(t,e){return e.startsWith("合成-")||e.startsWith("转换-")})),(function(t){return t<1?1:Math.ceil(t)})),(function(e,a){var n=e*t.dropTable[a].cost,i=S.a.mapValues(S.a.omit(t.dropTable[a],R),(function(t){return S.a.round(e*t,1)})),s=S.a.transform(i,(function(t,e,a){e>0&&t.push({name:a,num:e})}),[]);return s.sort((function(e,a){var n=t.materialsTable[a.name].rare-t.materialsTable[e.name].rare;return 0==n&&(n=a.num-e.num),n})),{times:e,cost:n,money:12*n,cardExp:S.a.round(t.dropTable[a].cardExp*e),drops:s}})),s=S.a.toPairs(i),l=S.a.transform(i,(function(t,e,a){return t.push(Object(r["a"])({code:a},e))}),[]);l.sort((function(t,e){return e.code.localeCompare(t.code)}));var o=0,c=S.a.transform(S.a.pickBy(n,(function(t,e){return e.startsWith("合成-")})),(function(e,a,n){var i=n.split("合成-")[1];o+=100*(t.materialsTable[i].rare-1)*a,e.push({name:i,num:S.a.round(a,1)})}),[]);return c.sort((function(e,a){var n=t.materialsTable[a.name].rare-t.materialsTable[e.name].rare;return 0==n&&(n=a.num-e.num),n})),o=S.a.round(o),{cost:S.a.sumBy(s,(function(t){return t[1].cost})),stages:l,synthesis:c,synthesisCost:o,money:S.a.sumBy(s,(function(t){return t[1].money}))-o,cardExp:S.a.sumBy(s,(function(t){return t[1].cardExp}))}}},methods:{num10k:function(t){return t>1e5?this.$root.localeCN?"".concat(S.a.round(t/1e4,2),"w"):"".concat(S.a.round(t/1e3,1),"k"):t},calcMaterialNameTextWidth:function(t){var e=245;return this.synthesizable[t.name]&&this.gaps[t.name][1]>0&&(e-=40),!this.$root.smallScreen&&S.a.size(t.drop)>=4&&(e-=85),e},synthesize:function(t){var e=this;if(this.synthesizable[t]){var a=this.gaps[t][1],n=this.materialsTable[t].madeof;S.a.forIn(n,(function(t,n){return e.inputs[n].have=(e.inputsInt[n].have-t*a).toString()})),this.inputs[t].have=(this.inputsInt[t].have+a).toString()}},reset:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=n?{inputs:S.a.cloneDeep(this.inputs),presets:S.a.cloneDeep(this.selected.presets)}:null;for(var s in!a||t&&"have"===t||(this.selected.presets=[]),this.ignoreInputsChange=!0,this.inputs){var r=this.inputs[s];if(t)r[t]="";else for(var l in r)r[l]=""}n&&this.$snackbar({message:this.$t("common.reseted"),timeout:0,buttonText:this.$t("common.undo"),onButtonClick:function(){e.ignoreInputsChange=!0,e.inputs=i.inputs,e.selected.presets=i.presets}})},addNeed:function(t){var e=this;S.a.each(t,(function(t,a){var n=parseInt(e.inputs[a].need)||0;e.inputs[a].need=(n+t).toString()}))},usePreset:function(t){var e=this;t&&(this.selected.presets=t),this.reset("need",!1,!1);var a=!0,n=!1,i=void 0;try{for(var s,r=function(){var t=s.value,a=t.name,n=t.setting,i=n.evolve,r=n.skills,l=e.elite[a];if(l.evolve.forEach((function(t,a){i[a]&&e.addNeed(t)})),r.normal[0])for(var o=r.normal[1]-1;o<r.normal[2]-1;o++)e.addNeed(l.skills.normal[o]);l.skills.elite.forEach((function(t,a){var n=r.elite[a];if(n[0])for(var i=l.skills.normal.length+1,s=n[1]-i;s<n[2]-i;s++)e.addNeed(l.skills.elite[a].cost[s])}))},l=this.selected.presets[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)r()}catch(o){n=!0,i=o}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}localStorage.setItem("material.selected",JSON.stringify(this.selected))},showPreset:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selectedPreset=t,this.selectedPresetName=t.tag.name,a?this.pSetting=S.a.cloneDeep(this.selected.presets[t.index].setting):(this.pSetting=S.a.cloneDeep(F),S.a.each(this.elite[this.selectedPresetName].skills.elite,(function(t,a){var n=t.cost;e.pSetting.skills.elite[a][2]-=3-n.length}))),this.$nextTick((function(){e.presetDialog.open(),e.$mutation()}))},addPreset:function(){this.checkPSetting?(this.selectedPreset.tag.setting=S.a.cloneDeep(this.pSetting),this.selectedPreset.tag.setting.state="edit",this.selectedPreset.addTag()):this.$snackbar(this.$t("cultivate.panel.preset.emptySelect"))},editPreset:function(){this.checkPSetting?(this.selected.presets[this.selectedPreset.index].setting=S.a.cloneDeep(this.pSetting),this.usePreset()):this.$snackbar(this.$t("cultivate.panel.preset.emptySelect"))},updatePreset:function(){var t=this;this.selected.presets.forEach((function(e){return e.text=t.$t("character.".concat(e.name))}))},saveData:function(){this.dataSyncDialog.close();var t={inputs:this.compressedInputs,presets:this.selected.presets},e=w["Base64"].encode(JSON.stringify(t));this.$prompt(this.$t("cultivate.panel.sync.saveDataLable"),this.$t("cultivate.panel.sync.saveDataTitle"),this.copyDialogInputText,(function(){}),{history:!1,defaultValue:e,cancelText:this.$t("common.close"),confirmText:this.$t("cultivate.panel.sync.copy2clipboard")})},restoreData:function(){var t=this;this.dataSyncDialog.close(),this.$prompt(this.$t("cultivate.panel.sync.restoreDataLable"),this.$t("cultivate.panel.sync.restoreDataTitle"),(function(e){if(0!=e.length)try{var a=JSON.parse(w["Base64"].decode(e)),n=a.inputs,i=a.presets;t.compressedInputs=n,t.selected.presets=i,t.$snackbar(t.$t("cultivate.snackbar.imported"))}catch(s){t.$snackbar(t.$t("cultivate.snackbar.importFailed"))}}),(function(){}),{history:!1,cancelText:this.$t("common.cancel"),confirmText:this.$t("common.import")})},cloudSaveData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e?function(){}:this.$snackbar,n={inputs:this.compressedInputs,presets:this.selected.presets},i={md5:P()(JSON.stringify(n)),data:n};this.dataSyncing=!0,this.setting.syncCode?T["a"].updateMyjson(this.setting.syncCode,i).then((function(){t.dataSyncing=!1,a(t.$t("cultivate.snackbar.backupSucceeded"))})).catch((function(){t.dataSyncing=!1,a(t.$t("cultivate.snackbar.backupFailed"))})):T["a"].createMyjson(i).then((function(e){var n=e.uri;t.dataSyncing=!1,t.setting.syncCode=S.a.last(n.split("/")),a(t.$t("cultivate.snackbar.backupSucceeded"))})).catch((function(){t.dataSyncing=!1,a(t.$t("cultivate.snackbar.backupFailed"))}))},cloudRestoreData:function(){var t=this;this.setting.syncCode&&(this.dataSyncing=!0,T["a"].getMyjson(this.setting.syncCode).then((function(e){var a=e.md5,n=e.data;if(!a||!n||a!==P()(JSON.stringify(n)))return t.dataSyncing=!1,void t.$snackbar(t.$t("cultivate.snackbar.restoreFailed"));t.ignoreInputsChange=!0,t.compressedInputs=n.inputs,t.selected.presets=n.presets,t.$snackbar(t.$t("cultivate.snackbar.restoreSucceeded")),t.dataSyncing=!1})).catch((function(){t.dataSyncing=!1,t.$snackbar(t.$t("cultivate.snackbar.restoreFailed"))})))},copyDialogInputText:function(){this.$$(".mdui-dialog-open input")[0].select(),document.execCommand("copy"),this.$snackbar(this.$t("cultivate.snackbar.copied"))},initPlanner:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s,l,o,c,u,m,d,p,v,h,f,g,b,_,y,k,$,C,x,w,D,I,N,P,E,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.plannerInited){e.next=2;break}return e.abrupt("return");case 2:if(t.penguinData.data&&!(t.penguinData.expire<S.a.now())){e.next=20;break}return a=t.$snackbar({message:t.$t("cultivate.snackbar.penguinDataLoading"),timeout:0,closeOnOutsideClick:!1}),e.next=6,T["a"].get(L,!0).catch((function(){return!1}));case 6:if(n=e.sent,a.close(),!n){e.next=14;break}t.penguinData.data=n,t.penguinData.expire=S.a.now()+24*z*60*60*1e3,localStorage.setItem("material.penguinData",JSON.stringify(t.penguinData)),e.next=20;break;case 14:if(!t.penguinData.data){e.next=18;break}t.$snackbar(t.$t("cultivate.snackbar.penguinDataFallback")),e.next=20;break;case 18:return t.$snackbar(t.$t("cultivate.snackbar.penguinDataFailed")),e.abrupt("return");case 20:i=t.dropInfo.expectAP,s=!0,l=!1,o=void 0,e.prev=24,c=t.materialsList[Symbol.iterator]();case 26:if(s=(u=c.next()).done){e.next=38;break}if(m=u.value,d=m.name,p=m.madeof,v=m.rare,i[d]={},t.materialConstraints[d]={min:0},0!=S.a.size(p)){e.next=32;break}return e.abrupt("continue",35);case 32:h={},h[d]=1,t.synthesisTable[v<=3?"le3":"gt3"]["合成-".concat(d)]=Object(r["a"])({},h,{},S.a.mapValues(p,(function(t){return-t})),{cost:0});case 35:s=!0,e.next=26;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](24),l=!0,o=e.t0;case 44:e.prev=44,e.prev=45,s||null==c.return||c.return();case 47:if(e.prev=47,!l){e.next=50;break}throw o;case 50:return e.finish(47);case 51:return e.finish(44);case 52:f={2001:200,2002:400,2003:1e3,2004:2e3},g=!0,b=!1,_=void 0,e.prev=56,y=t.penguinData.data.matrix[Symbol.iterator]();case 58:if(g=(k=y.next()).done){e.next=69;break}if($=k.value,C=$.item,x=C.itemId,w=C.itemType,D=$.stage,I=D.apCost,N=D.code,P=D.stageType,E=$.quantity,O=$.times,0!==E){e.next=62;break}return e.abrupt("continue",66);case 62:if(x in t.materialConstraints||"CARD_EXP"===w){e.next=64;break}return e.abrupt("continue",66);case 64:t.dropTable[N]||(t.dropTable[N]={cost:I,event:"ACTIVITY"===P,cardExp:0}),"CARD_EXP"===w?t.dropTable[N].cardExp+=f[x]*E/O:(t.dropTable[N][x]=E/O,i[x][N]=I/t.dropTable[N][x]);case 66:g=!0,e.next=58;break;case 69:e.next=75;break;case 71:e.prev=71,e.t1=e["catch"](56),b=!0,_=e.t1;case 75:e.prev=75,e.prev=76,g||null==y.return||y.return();case 78:if(e.prev=78,!b){e.next=81;break}throw _;case 81:return e.finish(78);case 82:return e.finish(75);case 83:S.a.forEach(i,(function(t){return t.value=S.a.min(S.a.values(t))||1/0})),S.a.forIn(t.materials,(function(t){var e=!0,a=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var l=s.value,o=l.name,c=l.madeof;0!=S.a.size(c)&&(i[o].value=Math.min(i[o].value,S.a.sum(S.a.map(c,(function(t,e){return t*i[e].value})))))}}catch(u){a=!0,n=u}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}})),S.a.forEach(t.dropTable,(function(e,a){t.dropInfo.stageValue[a]=S.a.sum(S.a.map(S.a.omit(e,R),(function(t,e){return i[e].value*t})))/e.cost})),t.plannerInited=!0;case 87:case"end":return e.stop()}}),e,null,[[24,40,44,52],[45,,47,51],[56,71,75,83],[76,,78,82]])})))()},showPlan:function(){var t=this;0===this.plan.cost?this.$alert("根本不需要计算啦~",(function(){}),{confirmText:"好吧"}):(this.plannerRequest=!0,this.$nextTick((function(){return t.plannerDialog.open()})))},resetPenguinData:function(){localStorage.removeItem("material.penguinData"),window.location.reload()},showDropDetail:function(t){var e=this,a=t.name,n=t.drop;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initPlanner();case 2:for(i in e.dropDetails=[],e.dropFocus=a,n)s=e.dropTable[i],r=S.a.toPairs(S.a.omit(s,R)).sort((function(t,a){var n=e.materialsTable[a[0]].rare-e.materialsTable[t[0]].rare;return 0!=n?n:a[1]-t[1]})),e.dropDetails.push({code:i,cost:s.cost,drops:r});e.$nextTick((function(){return e.dropDialog.open()}));case 6:case"end":return t.stop()}}),t)})))()},transitionBeforeLeave:function(t){t.style.top="".concat(t.offsetTop,"px"),t.style.left="".concat(t.offsetLeft,"px")},transitionAfterLeave:function(t){t.style.top="unset",t.style.left="unset"}},created:function(){var t=this,e=!0,a=!1,n=void 0;try{for(var i,s=this.materials[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var r=i.value.name;this.$set(this.inputs,r,{need:"",have:""})}}catch(d){a=!0,n=d}finally{try{e||null==s.return||s.return()}finally{if(a)throw n}}for(var l in this.materials=S.a.groupBy(this.materials,(function(t){return t.rare})),this.selected.rare=S.a.concat([!1],S.a.fill(Array(this.rareNum-1),!0)),localStorage)if(l.startsWith("material.")){var o=l.split(".")[1];"inputs"===o&&(this.ignoreInputsChange=!0),this[o]=S.a.assign({},this[o],S.a.pick(JSON.parse(localStorage.getItem(l)),S.a.keys(this[o])))}for(var c in this.inputs){var u=this.inputs[c];for(var m in u)0==u[m]&&(u[m]="")}this.updatePreset(),this.throttleAutoSyncUpload=S.a.throttle((function(){return t.cloudSaveData(!0)}),5e3,{leading:!1,trailing:!0})},mounted:function(){var t=this;this.presetDialog=new this.$Dialog("#preset-setting",{history:!1}),this.$$("#preset-setting").on("closed.mdui.dialog",(function(){return t.selectedPresetName=""})),this.plannerDialog=new this.$Dialog("#planner",{history:!1}),this.$$("#planner").on("closed.mdui.dialog",(function(){return t.plannerRequest=!1})),this.dropDialog=new this.$Dialog("#drop-detail",{history:!1}),this.dataSyncDialog=new this.$Dialog("#data-sync",{history:!1}),this.$root.materialListRendering&&setTimeout((function(){t.$root.materialListRendering=!1}),700)}},B=W,J=(a("5537"),Object(h["a"])(B,n,i,!1,null,null,null));e["default"]=J.exports},"4eb4":function(t,e,a){},"548c":function(t,e,a){},5537:function(t,e,a){"use strict";var n=a("4eb4"),i=a.n(n);i.a},"5c6d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1<=t.t&&t.t<=6?a("img",{staticClass:"no-pe item-t",attrs:{src:t.$root.materialImage("T"+t.t),crossorigin:"anonymous"}}):t._e()},i=[],s=(a("a9e3"),{name:"arkn-item-t",props:{t:[Number,String]}}),r=s,l=(a("e7a1"),a("0c7c")),o=Object(l["a"])(r,n,i,!1,null,"0b560d48",null);e["a"]=o.exports},"5d06":function(t,e,a){},"5fa4":function(t,e,a){},8679:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"arkn-item no-sl mdui-m-r-1 mdui-valign"},[a("arkn-item-t",{attrs:{t:t.t}}),a("div",{staticClass:"mdui-valign item-img-div",style:"width:"+t.width+"px;height:"+t.width+"px"},[a("img",{staticClass:"no-pe item-img",style:"transform:scale("+t.scale+")",attrs:{src:t.$root.materialImage(t.img),crossorigin:"anonymous"}})])],1)},i=[],s=(a("a9e3"),a("5c6d")),r={name:"arkn-item",components:{ArknItemT:s["a"]},computed:{scale:function(){return this.width/180}},props:{t:[Number,String],img:String,width:{type:Number,default:48}}},l=r,o=(a("da3e"),a("0c7c")),c=Object(o["a"])(l,n,i,!1,null,"49a764eb",null);e["a"]=c.exports},ab3e:function(t,e,a){"use strict";a("d3b7"),a("ac1f"),a("5319");var n=a("f3f3"),i=a("c579"),s=a.n(i),r=a("60bb"),l=a.n(r),o=s.a.JQ.ajax,c=function(t){return new Promise((function(e,a){o(Object(n["a"])({},t,{success:function(t){return e(t)},error:function(t,e){return a(e||"Network error")}}))}))};e["a"]={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c({method:"GET",url:t,dataType:e?"json":"text"})},tagOCR:function(t){return new Promise((function(e,a){var n=new FileReader;n.onloadend=function(){return c({method:"POST",url:"https://arkn-api.lolicon.app/ocr",processData:!1,data:JSON.stringify({image:n.result.replace(/^data:.+;base64,/,"")}),dataType:"json",contentType:"application/json"}).then(e).catch(a)},n.onerror=a,n.readAsDataURL(t)}))},ocrspace:function(t){var e=new FormData;return l.a.each(t,(function(t,a){return e.append(a,t)})),c({method:"POST",url:"https://api.ocr.space/parse/image",processData:!1,data:e,dataType:"json",contentType:!1,headers:{apikey:"helloworld"}})},createMyjson:function(t){return c({method:"POST",url:"https://api.myjson.com/bins",processData:!1,data:JSON.stringify(t),dataType:"json",contentType:"application/json"})},getMyjson:function(t){return c({method:"GET",url:"https://api.myjson.com/bins/".concat(t),dataType:"json",contentType:"application/json"})},updateMyjson:function(t,e){return c({method:"PUT",url:"https://api.myjson.com/bins/".concat(t),processData:!1,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})}}},b1a4:function(t,e,a){},b4ac:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"num-item"},[a("div",{staticClass:"mdui-valign"},[a("arkn-item",{attrs:{t:t.calcT,img:t.img,width:t.width}}),a("div",{staticClass:"with-label"},[a("label",{class:"mdui-textfield-label mdui-text-truncate "+t.calcColor},[t._v(t._s(t.lable))]),"undefined"!=typeof t.num?a("span",{class:t.calcColor},[t._v(t._s(t.num))]):a("span",{class:t.calcColor},[t._t("default")],2)])],1)])},i=[],s=(a("a9e3"),a("ac1f"),a("8679")),r={name:"arkn-num-item",components:{ArknItem:s["a"]},computed:{calcT:function(){if(this.t)return this.t;var t=/-(.+)-/.exec(this.img);return!!t&&t[1]},calcColor:function(){return this.color?this.color:""}},props:{t:[Number,String],img:String,lable:String,num:[Number,String],width:Number,color:[String,Boolean]}},l=r,o=(a("b7b1"),a("0c7c")),c=Object(o["a"])(l,n,i,!1,null,null,null);e["a"]=c.exports},b7b1:function(t,e,a){"use strict";var n=a("5fa4"),i=a.n(n);i.a},cf23:function(t,e,a){"use strict";var n=a("548c"),i=a.n(n);i.a},da3e:function(t,e,a){"use strict";var n=a("b1a4"),i=a.n(n);i.a},e7a1:function(t,e,a){"use strict";var n=a("5d06"),i=a.n(n);i.a}}]);